!function(){var t={},e=function(e){for(var n=t[e],i=n.deps,o=n.defn,s=i.length,c=new Array(s),u=0;u<s;++u)c[u]=r(i[u]);var f=o.apply(null,c);if(void 0===f)throw"module ["+e+"] returned undefined";n.instance=f},n=function(e,n,r){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===r)throw"no definition function for "+e;t[e]={deps:n,defn:r,instance:void 0}},r=function(n){var r=t[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&e(n),r.instance},i=n;(function(t,e){i(t,[],function(){return e})})("6",tinymce.util.Tools.resolve),i("1",["6"],function(t){return t("tinymce.EditorManager")}),i("2",["6"],function(t){return t("tinymce.dom.DOMUtils")}),i("3",["6"],function(t){return t("tinymce.Env")}),i("4",["6"],function(t){return t("tinymce.PluginManager")}),i("5",["6"],function(t){return t("tinymce.util.Tools")}),i("0",["1","2","3","4","5"],function(t,e,n,r,i){return r.add("importcss",function(r){function o(t){var e=n.cacheSuffix;return"string"==typeof t&&(t=t.replace("?"+e,"").replace("&"+e,"")),t}function s(e){var n=r.settings,i=!1!==n.skin&&(n.skin||"lightgray");if(i){var o=n.skin_url;return e===(o=o?r.documentBaseURI.toAbsolute(o):t.baseURL+"/skins/"+i)+"/content"+(r.inline?".inline":"")+".min.css"}return!1}function c(t){return"string"==typeof t?function(e){return-1!==e.indexOf(t)}:t instanceof RegExp?function(e){return t.test(e)}:t}function u(t,e){var n=[],c={};p(r.contentCSS,function(t){c[t]=!0}),e||(e=function(t,e){return e||c[t]});try{p(t.styleSheets,function(t){!function t(r,c){var u,f=r.href;if((f=o(f))&&e(f,c)&&!s(f)){p(r.imports,function(e){t(e,!0)});try{u=r.cssRules||r.rules}catch(r){}p(u,function(e){e.styleSheet?t(e.styleSheet,!0):e.selectorText&&p(e.selectorText.split(","),function(t){n.push(i.trim(t))})})}}(t)})}catch(t){}return n}function f(t){var e,n=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(n){var o=n[1],s=n[2].substr(1).split(".").join(" "),c=i.makeMap("a,img");return n[1]?(e={title:t},r.schema.getTextBlockElements()[o]?e.block=o:r.schema.getBlockElements()[o]||c[o.toLowerCase()]?e.selector=o:e.inline=o):n[2]&&(e={inline:"span",title:t.substr(1),classes:s}),!1!==r.settings.importcss_merge_classes?e.classes=s:e.attributes={class:s},e}}function l(t,e){return null===e||!1!==t.settings.importcss_exclusive}function a(t,e,n){return!(l(r,e)?t in n:t in e.selectors)}function m(t,e,n){l(r,e)?n[t]=!0:e.selectors[t]=!0}function d(t,e,n){var i=r.settings;return(n&&n.selector_converter?n.selector_converter:i.importcss_selector_converter?i.importcss_selector_converter:f).call(t,e,n)}var v=this,p=i.each;r.on("renderFormatsMenu",function(t){var n=r.settings,o={},s=c(n.importcss_selector_filter),f=t.control,l=function(t){return i.map(t,function(t){return i.extend({},t,{original:t,selectors:{},filter:c(t.filter),item:{text:t.title,menu:[]}})})}(n.importcss_groups),g=function(t,n){if(a(t,n,o)){m(t,n,o);var s=d(v,t,n);if(s){var c=s.name||e.DOM.uniqueId();return r.formatter.register(c,s),i.extend({},f.settings.itemDefaults,{text:s.title,format:c})}}return null};r.settings.importcss_append||f.items().remove(),p(u(t.doc||r.getDoc(),c(n.importcss_file_filter)),function(t){if(-1===t.indexOf(".mce-")&&(!s||s(t))){var e=function(t,e){return i.grep(t,function(t){return!t.filter||t.filter(e)})}(l,t);if(e.length>0)i.each(e,function(e){var n=g(t,e);n&&e.item.menu.push(n)});else{var n=g(t,null);n&&f.add(n)}}}),p(l,function(t){t.item.menu.length>0&&f.add(t.item)}),t.control.renderNew()}),v.convertSelectorToFormat=f}),function(){}}),r("0")()}();