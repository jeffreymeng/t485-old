!function(){var n={},t=function(t){for(var e=n[t],o=e.deps,r=e.defn,f=o.length,d=new Array(f),s=0;s<f;++s)d[s]=i(o[s]);var a=r.apply(null,d);if(void 0===a)throw"module ["+t+"] returned undefined";e.instance=a},e=function(t,e,i){if("string"!=typeof t)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+t;if(void 0===i)throw"no definition function for "+t;n[t]={deps:e,defn:i,instance:void 0}},i=function(e){var i=n[e];if(void 0===i)throw"module ["+e+"] was undefined";return void 0===i.instance&&t(e),i.instance},o=e;(function(n,t){o(n,[],function(){return t})})("3",tinymce.util.Tools.resolve),o("1",["3"],function(n){return n("tinymce.Env")}),o("2",["3"],function(n){return n("tinymce.PluginManager")}),o("0",["1","2"],function(n,t){return t.add("autolink",function(t){function e(n,t,e){function i(n,t){if(t<0&&(t=0),3==n.nodeType){var e=n.data.length;t>e&&(t=e)}return t}function r(n,t){1!=n.nodeType||n.hasChildNodes()?d.setStart(n,i(n,t)):d.setStartBefore(n)}function f(n,t){1!=n.nodeType||n.hasChildNodes()?d.setEnd(n,i(n,t)):d.setEndAfter(n)}var d,s,a,u,c,l,g,h,C,m;if("A"!=n.selection.getNode().tagName){if((d=n.selection.getRng(!0).cloneRange()).startOffset<5){if(!(h=d.endContainer.previousSibling)){if(!d.endContainer.firstChild||!d.endContainer.firstChild.nextSibling)return;h=d.endContainer.firstChild.nextSibling}if(r(h,C=h.length),f(h,C),d.endOffset<5)return;s=d.endOffset,u=h}else{if(3!=(u=d.endContainer).nodeType&&u.firstChild){for(;3!=u.nodeType&&u.firstChild;)u=u.firstChild;3==u.nodeType&&(r(u,0),f(u,u.nodeValue.length))}s=1==d.endOffset?2:d.endOffset-1-t}a=s;do{r(u,s>=2?s-2:0),f(u,s>=1?s-1:0),s-=1,m=d.toString()}while(" "!=m&&""!==m&&160!=m.charCodeAt(0)&&s-2>=0&&m!=e);d.toString()==e||160==d.toString().charCodeAt(0)?(r(u,s),f(u,a),s+=1):0===d.startOffset?(r(u,0),f(u,a)):(r(u,s),f(u,a)),"."==(l=d.toString()).charAt(l.length-1)&&f(u,a-1),(g=(l=d.toString()).match(o))&&("www."==g[1]?g[1]="http://www.":/@$/.test(g[1])&&!/^mailto:/.test(g[1])&&(g[1]="mailto:"+g[1]),c=n.selection.getBookmark(),n.selection.setRng(d),n.execCommand("createlink",!1,g[1]+g[2]),n.settings.default_link_target&&n.dom.setAttrib(n.selection.getNode(),"target",n.settings.default_link_target),n.selection.moveToBookmark(c),n.nodeChanged())}}var i,o=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;return t.settings.autolink_pattern&&(o=t.settings.autolink_pattern),t.on("keydown",function(n){if(13==n.keyCode)return function(n){e(n,-1,"")}(t)}),n.ie?void t.on("focus",function(){if(!i){i=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}}):(t.on("keypress",function(n){if(41==n.keyCode)return function(n){e(n,-1,"(")}(t)}),void t.on("keyup",function(n){if(32==n.keyCode)return function(n){e(n,0,"")}(t)}))}),function(){}}),i("0")()}();