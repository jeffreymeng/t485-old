!function(){var t={},e=function(e){for(var n=t[e],i=n.deps,r=n.defn,a=i.length,l=new Array(a),u=0;u<a;++u)l[u]=o(i[u]);var s=r.apply(null,l);if(void 0===s)throw"module ["+e+"] returned undefined";n.instance=s},n=function(e,n,o){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===o)throw"no definition function for "+e;t[e]={deps:n,defn:o,instance:void 0}},o=function(n){var o=t[n];if(void 0===o)throw"module ["+n+"] was undefined";return void 0===o.instance&&e(n),o.instance},i=n,r=function(t,e){i(t,[],function(){return e})};r("4",tinymce.util.Tools.resolve),i("1",["4"],function(t){return t("tinymce.PluginManager")}),i("5",["4"],function(t){return t("tinymce.util.VK")}),i("a",["4"],function(t){return t("tinymce.util.Delay")}),i("b",["4"],function(t){return t("tinymce.util.Tools")}),i("c",["4"],function(t){return t("tinymce.util.XHR")}),i("9",[],function(){var t=function(t){return t.target_list},e=function(t){return t.rel_list},n=function(t){return t.link_class_list};return{assumeExternalTargets:function(t){return"boolean"==typeof t.link_assume_external_targets&&t.link_assume_external_targets},hasContextToolbar:function(t){return"boolean"==typeof t.link_context_toolbar&&t.link_context_toolbar},getLinkList:function(t){return t.link_list},hasDefaultLinkTarget:function(t){return"string"==typeof t.default_link_target},getDefaultLinkTarget:function(t){return t.default_link_target},getTargetList:t,setTargetList:function(t,e){t.settings.target_list=e},shouldShowTargetList:function(e){return!1!==t(e)},getRelList:e,hasRelList:function(t){return void 0!==e(t)},getLinkClassList:n,hasLinkClassList:function(t){return void 0!==n(t)},shouldShowLinkTitle:function(t){return!1!==t.link_title},allowUnsafeLinkTarget:function(t){return"boolean"==typeof t.allow_unsafe_link_target&&t.allow_unsafe_link_target}}}),r("d",RegExp),i("8",["b","9","d"],function(t,e,n){var o=function(e,n){var o=["noopener"],i=e?e.split(/\s+/):[],r=function(e){return e.filter(function(e){return-1===t.inArray(o,e)})};return(i=n?function(t){return(t=r(t)).length?t.concat(o):o}(i):r(i)).length?function(e){return t.trim(e.sort().join(" "))}(i):null},i=function(t,e){return e=e||t.selection.getStart(),a(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},r=function(t){return t&&"A"===t.nodeName&&t.href},a=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},l=function(t,e){var n,o;(o=t.dom.select("img",e)[0])&&((n=t.dom.getParents(o,"a[href]",e)[0])&&(n.parentNode.insertBefore(o,n),t.dom.remove(n)))},u=function(t,e,n){var o,i;(i=t.dom.select("img",e)[0])&&(o=t.dom.create("a",n),i.parentNode.insertBefore(o,i),o.appendChild(i))};return{link:function(t,n){return function(r){t.undoManager.transact(function(){var l=t.selection.getNode(),s=i(t,l),c={href:r.href,target:r.target?r.target:null,rel:r.rel?r.rel:null,class:r.class?r.class:null,title:r.title?r.title:null};e.hasRelList(t.settings)||!1!==e.allowUnsafeLinkTarget(t.settings)||(c.rel=o(c.rel,"_blank"==c.target)),r.href===n.href&&(n.attach(),n={}),s?(t.focus(),r.hasOwnProperty("text")&&("innerText"in s?s.innerText=r.text:s.textContent=r.text),t.dom.setAttribs(s,c),t.selection.select(s),t.undoManager.add()):a(l)?u(t,l,c):r.hasOwnProperty("text")?t.insertContent(t.dom.createHTML("a",c,t.dom.encode(r.text))):t.execCommand("mceInsertLink",!1,c)})}},unlink:function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();a(e)?l(t,e):t.execCommand("unlink")})}},isLink:r,hasLinks:function(e){return t.grep(e,r).length>0},isOnlyTextSelected:function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1==t.indexOf("href=")))},getAnchorElement:i,getAnchorText:function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},toggleTargetRules:o}}),i("6",["a","b","c","8","9"],function(t,e,n,o,i){var r={},a=function(t,n,o){var i=function(t,o){return o=o||[],e.each(t,function(t){var e={text:t.text||t.title};t.menu?e.menu=i(t.menu):(e.value=t.value,n&&n(e)),o.push(e)}),o};return i(t,o||[])},l=function(e,n,o){var i=e.selection.getRng();t.setEditorTimeout(e,function(){e.windowManager.confirm(n,function(t){e.selection.setRng(i),o(t)})})},u=function(t,n){var u,s,c,f,d,g,h,v,m,p,k,x={},b=t.selection,L=t.dom,y=function(t){var e=c.find("#text");(!e.value()||t.lastControl&&e.value()==t.lastControl.text())&&e.value(t.control.text()),c.find("#href").value(t.control.value())},T=function(){s||!f||x.text||this.parent().parent().find("#text")[0].value(this.value())};f=o.isOnlyTextSelected(b.getContent()),u=o.getAnchorElement(t),x.text=s=o.getAnchorText(t.selection,u),x.href=u?L.getAttrib(u,"href"):"",u?x.target=L.getAttrib(u,"target"):i.hasDefaultLinkTarget(t.settings)&&(x.target=i.getDefaultLinkTarget(t.settings)),(k=L.getAttrib(u,"rel"))&&(x.rel=k),(k=L.getAttrib(u,"class"))&&(x.class=k),(k=L.getAttrib(u,"title"))&&(x.title=k),f&&(d={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){x.text=this.value()}}),n&&(g={type:"listbox",label:"Link list",values:a(n,function(e){e.value=t.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:y,value:t.convertURL(x.href,"href"),onPostRender:function(){g=this}}),i.shouldShowTargetList(t.settings)&&(void 0===i.getTargetList(t.settings)&&i.setTargetList(t,[{text:"None",value:""},{text:"New window",value:"_blank"}]),v={name:"target",type:"listbox",label:"Target",values:a(i.getTargetList(t.settings))}),i.hasRelList(t.settings)&&(h={name:"rel",type:"listbox",label:"Rel",values:a(i.getRelList(t.settings),function(e){!1===i.allowUnsafeLinkTarget(t.settings)&&(e.value=o.toggleTargetRules(e.value,"_blank"===x.target))})}),i.hasLinkClassList(t.settings)&&(m={name:"class",type:"listbox",label:"Class",values:a(i.getLinkClassList(t.settings),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})})}),i.shouldShowLinkTitle(t.settings)&&(p={name:"title",type:"textbox",label:"Title",value:x.title}),c=t.windowManager.open({title:"Insert link",data:x,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(n){var o=n.meta||{};g&&g.value(t.convertURL(this.value(),"href")),e.each(n.meta,function(t,e){var n=c.find("#"+e);"text"===e?0===s.length&&(n.value(t),x.text=t):n.value(t)}),o.attach&&(r={href:this.value(),attach:o.attach}),o.text||T.call(this)},onkeyup:T,onbeforecall:function(t){t.meta=c.toJSON()}},d,p,function(n){var o=[];if(e.each(t.dom.select("a:not([href])"),function(t){var e=t.name||t.id;e&&o.push({text:e,value:"#"+e,selected:-1!=n.indexOf("#"+e)})}),o.length)return o.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:o,onselect:y}}(x.href),g,h,v,m],onSubmit:function(n){var a=i.assumeExternalTargets(t.settings),u=o.link(t,r),c=o.unlink(t),d=e.extend({},x,n.data),g=d.href;return g?(f&&d.text!==s||delete d.text,g.indexOf("@")>0&&-1==g.indexOf("//")&&-1==g.indexOf("mailto:")?void l(t,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(t){t&&(d.href="mailto:"+g),u(d)}):!0===a&&!/^\w+:/i.test(g)||!1===a&&/^\s*www[\.|\d\.]/i.test(g)?void l(t,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){t&&(d.href="http://"+g),u(d)}):void u(d)):void c()}})};return{open:function(t){!function(t,e){var o=i.getLinkList(t.settings);"string"==typeof o?n.send({url:o,success:function(n){e(t,JSON.parse(n))}}):"function"==typeof o?o(function(n){e(t,n)}):e(t,o)}(t,u)}}}),i("e",["4"],function(t){return t("tinymce.dom.DOMUtils")}),i("f",["4"],function(t){return t("tinymce.Env")}),i("7",["e","f"],function(t,e){return{open:function(n){if(!e.ie||e.ie>10){var o=document.createElement("a");o.target="_blank",o.href=n,o.rel="noreferrer noopener";var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(o,i)}else{var r=window.open("","_blank");if(r){r.opener=null;var a=r.document;a.open(),a.write('<meta http-equiv="refresh" content="0; url='+t.DOM.encode(n)+'">'),a.close()}}}}}),i("2",["5","6","7","8","9"],function(t,e,n,o,i){var r=function(t,e){return t.dom.getParent(e,"a[href]")},a=function(t){return r(t,t.selection.getStart())},l=function(t,e){if(e){var o=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")}(e);if(/^#/.test(o)){var i=t.$(o);i.length&&t.selection.scrollIntoView(i[0],!0)}else n.open(e.href)}};return{openDialog:function(t){return function(){e.open(t)}},gotoSelectedLink:function(t){return function(){l(t,a(t))}},leftClickedOnAHref:function(t){return function(e){var n,r,a;return!!(i.hasContextToolbar(t.settings)&&!function(t){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}(t)&&o.isLink(e)&&(n=t.selection,r=n.getRng(),a=r.startContainer,3==a.nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<a.data.length))}},setupGotoLinks:function(e){e.on("click",function(n){var o=r(e,n.target);o&&t.metaKeyPressed(n)&&(n.preventDefault(),l(e,o))}),e.on("keydown",function(t){var n=a(e);n&&13===t.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(t)&&(t.preventDefault(),l(e,n))})},toggleActiveState:function(t){return function(){var e=this;t.on("nodechange",function(n){e.active(!t.readonly&&!!o.getAnchorElement(t,n.element))})}},toggleViewLinkState:function(t){return function(){var e=this,n=function(t){o.hasLinks(t.parents)?e.show():e.hide()};o.hasLinks(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",n),e.on("remove",function(){t.off("nodechange",n)})}}}}),i("3",["2","8"],function(t,e){return{setupButtons:function(n){n.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:t.openDialog(n),onpostrender:t.toggleActiveState(n)}),n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onclick:e.unlink(n),onpostrender:t.toggleActiveState(n)}),n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:t.gotoSelectedLink(n)})},setupMenuItems:function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:t.gotoSelectedLink(e),onPostRender:t.toggleViewLinkState(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:t.openDialog(e),stateSelector:"a[href]",context:"insert",prependToContext:!0})},setupContextToolbars:function(e){e.addContextToolbar&&e.addContextToolbar(t.leftClickedOnAHref(e),"openlink | link unlink")}}}),i("0",["1","2","3"],function(t,e,n){return t.add("link",function(t){n.setupButtons(t),n.setupMenuItems(t),n.setupContextToolbars(t),e.setupGotoLinks(t),t.addShortcut("Meta+K","",e.openDialog(t)),t.addCommand("mceLink",e.openDialog(t))}),function(){}}),o("0")()}();