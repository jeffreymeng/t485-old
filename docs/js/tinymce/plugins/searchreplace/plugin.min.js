!function(){var e={},t=function(t){for(var n=e[t],a=n.deps,i=n.defn,o=a.length,d=new Array(o),l=0;l<o;++l)d[l]=r(a[l]);var c=i.apply(null,d);if(void 0===c)throw"module ["+t+"] returned undefined";n.instance=c},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},a=n;(function(e,t){a(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),a("1",["4"],function(e){return e("tinymce.PluginManager")}),a("2",["4"],function(e){return e("tinymce.util.Tools")}),a("3",[],function(){function e(e){return e&&1==e.nodeType&&"false"===e.contentEditable}return{findAndReplaceDOMText:function(t,n,r,a,i){function o(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}var d,l,c,s,f,u,h=[],p=0;if(c=n.ownerDocument,s=i.getBlockElements(),f=i.getWhiteSpaceElements(),u=i.getShortEndedElements(),l=function t(n){var r;if(3===n.nodeType)return n.data;if(f[n.nodeName]&&!s[n.nodeName])return"";if(r="",e(n))return"\n";if((s[n.nodeName]||u[n.nodeName])&&(r+="\n"),n=n.firstChild)do{r+=t(n)}while(n=n.nextSibling);return r}(n)){if(t.global)for(;d=t.exec(l);)h.push(o(d,a));else d=l.match(t),h.push(o(d,a));return h.length&&(p=h.length,function(t,n,r){var a,i,o,d,l=[],c=0,h=t,p=n.shift(),m=0;e:for(;;){if((s[h.nodeName]||u[h.nodeName]||e(h))&&c++,3===h.nodeType&&(!i&&h.length+c>=p[1]?(i=h,d=p[1]-c):a&&l.push(h),!a&&h.length+c>p[0]&&(a=h,o=p[0]-c),c+=h.length),a&&i){if(h=r({startNode:a,startNodeIndex:o,endNode:i,endNodeIndex:d,innerNodes:l,match:p[2],matchIndex:m}),c-=i.length-d,a=null,i=null,l=[],m++,!(p=n.shift()))break}else if(f[h.nodeName]&&!s[h.nodeName]||!h.firstChild){if(h.nextSibling){h=h.nextSibling;continue}}else if(!e(h)){h=h.firstChild;continue}for(;;){if(h.nextSibling){h=h.nextSibling;break}if(h.parentNode===t)break e;h=h.parentNode}}}(n,h,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:c.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(c.createTextNode(e)),r}}else t=e;return function(e){var n,r,a,i=e.startNode,o=e.endNode,d=e.matchIndex;if(i===o){var l=i;a=l.parentNode,e.startNodeIndex>0&&(n=c.createTextNode(l.data.substring(0,e.startNodeIndex)),a.insertBefore(n,l));var s=t(e.match[0],d);return a.insertBefore(s,l),e.endNodeIndex<l.length&&(r=c.createTextNode(l.data.substring(e.endNodeIndex)),a.insertBefore(r,l)),l.parentNode.removeChild(l),s}n=c.createTextNode(i.data.substring(0,e.startNodeIndex)),r=c.createTextNode(o.data.substring(e.endNodeIndex));for(var f=t(i.data.substring(e.startNodeIndex),d),u=[],h=0,p=e.innerNodes.length;h<p;++h){var m=e.innerNodes[h],g=t(m.data,d);m.parentNode.replaceChild(g,m),u.push(g)}var v=t(o.data.substring(0,e.endNodeIndex),d);return(a=i.parentNode).insertBefore(n,i),a.insertBefore(f,i),a.removeChild(i),(a=o.parentNode).insertBefore(v,o),a.insertBefore(r,o),a.removeChild(o),v}}(r))),p}}}}),a("0",["1","2","3"],function(e,t,n){return e.add("searchreplace",function(e){function r(){function n(){o.statusbar.find("#next").disabled(!d(u+1).length),o.statusbar.find("#prev").disabled(!d(u-1).length)}function r(){e.windowManager.alert("Could not find the specified string.",function(){o.find("#find")[0].focus()})}var a,i={};a=t.trim(e.selection.getContent({format:"text"}));var o=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),f.done()},onSubmit:function(e){var t,a,l,c;return e.preventDefault(),a=o.find("#case").checked(),c=o.find("#words").checked(),(l=o.find("#find").value()).length?i.text==l&&i.caseState==a&&i.wholeWord==c?0===d(u+1).length?void r():(f.next(),void n()):((t=f.find(l,a,c))||r(),o.statusbar.items().slice(1).disabled(0===t),n(),void(i={text:l,caseState:a,wholeWord:c})):(f.done(!1),void o.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){o.submit()}},{text:"Replace",disabled:!0,onclick:function(){f.replace(o.find("#replace").value())||(o.statusbar.items().slice(1).disabled(!0),u=-1,i={})}},{text:"Replace all",disabled:!0,onclick:function(){f.replace(o.find("#replace").value(),!0,!0),o.statusbar.items().slice(1).disabled(!0),i={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){f.prev(),n()}},{text:"Next",name:"next",disabled:!0,onclick:function(){f.next(),n()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:a},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}function a(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function i(t){var r,a;return(a=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),f.done(!1),n.findAndReplaceDOMText(t,r,a,!1,e.schema)}function o(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function d(n){var r,i=[];if((r=t.toArray(e.getBody().getElementsByTagName("span"))).length)for(var o=0;o<r.length;o++){var d=a(r[o]);null!==d&&d.length&&d===n.toString()&&i.push(r[o])}return i}function l(t){var n=u,r=e.dom;(t=!1!==t)?n++:n--,r.removeClass(d(u),"mce-match-marker-selected");var a=d(n);return a.length?(r.addClass(d(n),"mce-match-marker-selected"),e.selection.scrollIntoView(a[0]),n):-1}function c(t){var n=e.dom,r=t.parentNode;n.remove(t),n.isEmpty(r)&&n.remove(r)}function s(e){var t=a(e);return null!==t&&t.length>0}var f=this,u=-1;f.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:r,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:r}),e.addCommand("SearchReplace",r),e.shortcuts.add("Meta+F","",r)},f.find=function(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=n?"\\b"+e+"\\b":e;var r=i(new RegExp(e,t?"g":"gi"));return r&&(u=-1,u=l(!0)),r},f.next=function(){var e=l(!0);-1!==e&&(u=e)},f.prev=function(){var e=l(!1);-1!==e&&(u=e)},f.replace=function(n,r,i){var l,h,p,m,g,v,x=u;for(r=!1!==r,p=e.getBody(),h=t.grep(t.toArray(p.getElementsByTagName("span")),s),l=0;l<h.length;l++){var b=a(h[l]);if(m=g=parseInt(b,10),i||m===u){for(n.length?(h[l].firstChild.nodeValue=n,o(h[l])):c(h[l]);h[++l];){if((m=parseInt(a(h[l]),10))!==g){l--;break}c(h[l])}r&&x--}else g>u&&h[l].setAttribute("data-mce-index",g-1)}return e.undoManager.add(),u=x,r?(v=d(x+1).length>0,f.next()):(v=d(x-1).length>0,f.prev()),!i&&v},f.done=function(n){var r,i,d,l;for(i=t.toArray(e.getBody().getElementsByTagName("span")),r=0;r<i.length;r++){var c=a(i[r]);null!==c&&c.length&&(c===u.toString()&&(d||(d=i[r].firstChild),l=i[r].firstChild),o(i[r]))}if(d&&l){var s=e.dom.createRng();return s.setStart(d,0),s.setEnd(l,l.data.length),!1!==n&&e.selection.setRng(s),s}}}),function(){}}),r("0")()}();