!function(){var t={},n=function(n){for(var e=t[n],i=e.deps,o=e.defn,u=i.length,c=new Array(u),a=0;a<u;++a)c[a]=r(i[a]);var l=o.apply(null,c);if(void 0===l)throw"module ["+n+"] returned undefined";e.instance=l},e=function(n,e,r){if("string"!=typeof n)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+n;if(void 0===r)throw"no definition function for "+n;t[n]={deps:e,defn:r,instance:void 0}},r=function(e){var r=t[e];if(void 0===r)throw"module ["+e+"] was undefined";return void 0===r.instance&&n(e),r.instance},i=e;(function(t,n){i(t,[],function(){return n})})("d",tinymce.util.Tools.resolve),i("1",["d"],function(t){return t("tinymce.ThemeManager")}),i("2",["d"],function(t){return t("tinymce.ui.Api")}),i("3",["d"],function(t){return t("tinymce.util.Delay")}),i("4",[],function(){var t=function(n){return n.reduce(function(n,e){return Array.isArray(e)?n.concat(t(e)):n.concat(e)},[])};return{flatten:t}}),i("e",[],function(){var t=function(t){return function(n){return typeof n===t}},n=function(t){return Array.isArray(t)},e=function(t){return null===t};return{isString:t("string"),isNumber:t("number"),isBoolean:t("boolean"),isFunction:t("function"),isObject:function(t){return function(r){return!e(r)&&!n(r)&&t(r)}}(t("object")),isNull:e,isArray:n}}),i("5",["e"],function(t){var n=function(t,n){if(n(t))return!0;throw new Error("Default value doesn't match requested type.")},e=function(t){return function(e,r,i){var o=e.settings;return n(i,t),r in o&&t(o[r])?o[r]:i}},r=function(n,e){return t.isArray(n)?n:t.isString(n)?function(t){return"string"==typeof t?function(t,n){return t.split(n).filter(function(t){return t.length>0})}(t,/[ ,]/):t}(n):t.isBoolean(n)?function(t,n){return!1===t?[]:n}(n,e):e};return{getStringOr:e(t.isString),getBoolOr:e(t.isBoolean),getNumberOr:e(t.isNumber),getHandlerOr:e(t.isFunction),getToolbarItemsOr:function(t){return function(e,i,o){var u=i in e.settings?e.settings[i]:o;return n(o,t),r(u,o)}}(t.isArray)}}),i("7",[],function(){return{match:function(t,n){for(var e=0;e<n.length;e++){var r=(0,n[e])(t);if(r)return r}return null},result:function(t,n){return{id:t,rect:n}}}}),i("i",["d"],function(t){return t("tinymce.dom.DOMUtils")}),i("q",["d"],function(t){return t("tinymce.geom.Rect")}),i("r",[],function(){return{fromClientRect:function(t){return{x:t.left,y:t.top,w:t.width,h:t.height}},toClientRect:function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}}}}),i("f",["i","q","r"],function(t,n,e){var r=function(n){var e=t.DOM.getViewPort();return{x:n.x+e.x,y:n.y+e.y,w:n.w,h:n.h}},i=function(t){var n=t.getBoundingClientRect();return r({x:n.left,y:n.top,w:Math.max(t.clientWidth,t.offsetWidth),h:Math.max(t.clientHeight,t.offsetHeight)})};return{getElementRect:function(t,n){return i(n)},getPageAreaRect:function(t){return i(t.getElement().ownerDocument.body)},getContentAreaRect:function(t){return i(t.getContentAreaContainer()||t.getBody())},getSelectionRect:function(t){var n=t.selection.getBoundingClientRect();return n?r(e.fromClientRect(n)):null}}}),i("6",["7","f"],function(t,n){return{element:function(e,r){return function(i){for(var o=0;o<r.length;o++)if(r[o].predicate(e))return t.result(r[o].id,n.getElementRect(i,e));return null}},parent:function(e,r){return function(i){for(var o=0;o<e.length;o++)for(var u=0;u<r.length;u++)if(r[u].predicate(e[o]))return t.result(r[u].id,n.getElementRect(i,e[o]));return null}}}}),i("g",["d"],function(t){return t("tinymce.util.Tools")}),i("8",["g"],function(t){var n=function(t,n){return{id:t,predicate:n}};return{create:n,fromContextToolbars:function(e){return t.map(e,function(t){return n(t.id,t.predicate)})}}}),i("9",["7","f"],function(t,n){return{textSelection:function(e){return function(r){return r.selection.isCollapsed()?null:t.result(e,n.getSelectionRect(r))}},emptyTextBlock:function(e,r){return function(i){var o,u=i.schema.getTextBlockElements();for(o=0;o<e.length;o++)if("TABLE"===e[o].nodeName)return null;for(o=0;o<e.length;o++)if(e[o].nodeName in u)return i.dom.isEmpty(e[o])?t.result(r,n.getSelectionRect(i)):null;return null}}}}),i("h",["d"],function(t){return t("tinymce.EditorManager")}),i("a",["h","i"],function(t,n){var e=function(n){var e=t.baseURL+"/skins/";return n?e+n:e+"lightgray"};return{load:function(t,r){var i=t.settings,o=i.skin_url?function(t,n){return t.documentBaseURI.toAbsolute(n)}(t,i.skin_url):e(i.skin);n.DOM.styleSheetLoader.load(o+"/skin.min.css",function(){!function(t,n){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded"),n()};t.initialized?e():t.on("init",e)}(t,r)}),t.contentCSS.push(o+"/content.inline.min.css")}}}),i("j",["d"],function(t){return t("tinymce.ui.Factory")}),i("k",["g","j","e"],function(t,n,e){var r=function(t){return e.isArray(t)?t:e.isString(t)?t.split(/[ ,]/):[]};return{create:function(e,i,o){var u,c=[];if(o)return t.each(r(o),function(t){var r;"|"==t?u=null:e.buttons[t]&&(u||(u={type:"buttongroup",items:[]},c.push(u)),r=t,"function"==typeof(t=e.buttons[r])&&(t=t()),t.type=t.type||"button",(t=n.create(t)).on("postRender",function(t,n,e){return function(){var n=function(t,n){var e=function(t,n){return{selector:t,handler:n}};return n.settings.stateSelector?e(n.settings.stateSelector,function(t){n.active(t)}):n.settings.disabledStateSelector?e(n.settings.disabledStateSelector,function(t){n.disabled(t)}):null}(0,e);null!==n&&t.selection.selectorChanged(n.selector,n.handler)}}(e,0,t)),u.items.push(t))}),n.create({type:"toolbar",layout:"flow",name:i,items:c})}}}),i("s",["d"],function(t){return t("tinymce.util.Promise")}),i("t",[],function(){var t=0;return{uuid:function(n){return n+t+++function(){var t=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+Date.now().toString(36)+t()+t()+t()}()}}}),i("w",[],function(){return{create:function(t,n){function e(e){var i,o,u;o=n[e?"startContainer":"endContainer"],u=n[e?"startOffset":"endOffset"],1==o.nodeType&&(i=t.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(u=Math.min(u,o.childNodes.length-1),e?o.insertBefore(i,o.childNodes[u]):t.insertAfter(i,o.childNodes[u])):o.appendChild(i),o=i,u=0),r[e?"startContainer":"endContainer"]=o,r[e?"startOffset":"endOffset"]=u}var r={};return e(!0),n.collapsed||e(),r},resolve:function(t,n){function e(e){var r,i,o;r=o=n[e?"startContainer":"endContainer"],i=n[e?"startOffset":"endOffset"],r&&(1==r.nodeType&&(i=function(t){for(var n=t.parentNode.firstChild,e=0;n;){if(n==t)return e;1==n.nodeType&&"bookmark"==n.getAttribute("data-mce-type")||e++,n=n.nextSibling}return-1}(r),r=r.parentNode,t.remove(o)),n[e?"startContainer":"endContainer"]=r,n[e?"startOffset":"endOffset"]=i)}e(!0),e();var r=t.createRng();return r.setStart(n.startContainer,n.startOffset),n.endContainer&&r.setEnd(n.endContainer,n.endOffset),r}}}),i("x",["d"],function(t){return t("tinymce.dom.TreeWalker")}),i("y",["d"],function(t){return t("tinymce.dom.RangeUtils")}),i("u",["w","g","x","y"],function(t,n,e,r){var i=function(t,n,r){var i,o,u=[];for(i=new e(n,t),o=n;o&&(1===o.nodeType&&u.push(o),o!==r);o=i.next());return u},o=function(e,r){var i,o,u;o=e.dom,u=e.selection,i=t.create(o,u.getRng()),n.each(r,function(t){e.dom.remove(t,!0)}),u.setRng(t.resolve(o,i))},u=function(t){return"A"===t.nodeName&&t.hasAttribute("href")},c=function(t){var e,o,c,a,l,f;return a=t.selection,l=t.dom,f=a.getRng(),e=function(t,n){var e=t.getParent(n,u);return e||n}(l,r.getNode(f.startContainer,f.startOffset)),o=r.getNode(f.endContainer,f.endOffset),c=t.getBody(),n.grep(i(c,e,o),u)};return{unlinkSelection:function(t){o(t,c(t))}}}),i("p",["t","u"],function(t,n){var e=function(t){t.selection.collapse(!1)},r=function(t){t.focus(),n.unlinkSelection(t),e(t)},i=function(t,n){var r=t.dom.getParent(t.selection.getStart(),"a[href]");r?function(t,n,r){t.focus(),t.dom.setAttrib(n,"href",r),e(t)}(t,r,n):function(t,n){t.execCommand("mceInsertLink",!1,{href:n}),e(t)}(t,n)};return{insertTable:function(t,n,e){t.undoManager.transact(function(){var r,i;t.insertContent(function(t,n){var e,r,i;for(i='<table data-mce-id="mce" style="width: 100%">',i+="<tbody>",r=0;r<n;r++){for(i+="<tr>",e=0;e<t;e++)i+="<td><br></td>";i+="</tr>"}return(i+="</tbody>")+"</table>"}(n,e)),(r=function(t){return t.dom.select("*[data-mce-id]")[0]}(t)).removeAttribute("data-mce-id"),i=t.dom.select("td,th",r),t.selection.setCursorLocation(i[0],0)})},formatBlock:function(t,n){t.execCommand("FormatBlock",!1,n)},insertBlob:function(n,e,r){var i,o;o=(i=n.editorUpload.blobCache).create(t.uuid("mceu"),r,e),i.add(o),n.insertContent(n.dom.createHTML("img",{src:o.blobUri()}))},createLink:function(t,n){0===n.trim().length?r(t):i(t,n)},unlink:r}}),i("v",[],function(){return{isDomainLike:function(t){return/^www\.|\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|es|mil)$/i.test(t.trim())},isAbsolute:function(t){return/^https?:\/\//.test(t.trim())}}}),i("l",["g","j","s","p","v"],function(t,n,e,r,i){var o=function(e,r){var i=n.create(t.extend({type:"form",layout:"flex",direction:"row",padding:5,name:e,spacing:3},r));return i.on("show",function(){i.find("textbox").eq(0).each(function(t){t.focus()})}),i},u=function(t,n){return!i.isAbsolute(n)&&i.isDomainLike(n)?function(t,n){return new e(function(e){t.windowManager.confirm("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){e(!0===t?"http://"+n:n)})})}(t,n):e.resolve(n)};return{createQuickLinkForm:function(t,n){var e={};return o("quicklink",{items:[{type:"button",name:"unlink",icon:"unlink",onclick:function(){t.focus(),r.unlink(t),n()},tooltip:"Remove link"},{type:"filepicker",name:"linkurl",placeholder:"Paste or type a link",filetype:"file",onchange:function(t){var n=t.meta;n&&n.attach&&(e={href:this.value(),attach:n.attach})}},{type:"button",icon:"checkmark",subtype:"primary",tooltip:"Ok",onclick:"submit"}],onshow:function(n){if(n.control===this){var e,r="";(e=t.dom.getParent(t.selection.getStart(),"a[href]"))&&(r=t.dom.getAttrib(e,"href")),this.fromJSON({linkurl:r}),function(t,n){n?t.show():t.hide()}(this.find("#unlink"),e),this.find("#linkurl")[0].focus()}},onsubmit:function(i){u(t,i.data.linkurl).then(function(i){t.undoManager.transact(function(){i===e.href&&(e.attach(),e={}),r.createLink(t,i)}),n()})}})}}}),i("m",["q","r"],function(t,n){var e=function(t,n){return{rect:t,position:n}},r=function(t,n){return{x:n.x,y:n.y,w:t.w,h:t.h}},i=function(n,i,o,u,c){var a,l,f;return a=t.findBestRelativePosition(c,o,u,n),o=t.clamp(o,u),a?(l=t.relativePosition(c,o,a),f=r(c,l),e(f,a)):(o=t.intersect(u,o))?(a=t.findBestRelativePosition(c,o,u,i))?(l=t.relativePosition(c,o,a),f=r(c,l),e(f,a)):(f=r(c,o),e(f,a)):null};return{calcInsert:function(t,n,e){return i(["cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr"],t,n,e)},calc:function(t,n,e){return i(["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr"],["bc-tc","bl-tl","br-tr"],t,n,e)},userConstrain:function(t,e,r,i){var o;return"function"==typeof t?(o=t({elementRect:n.toClientRect(e),contentAreaRect:n.toClientRect(r),panelRect:n.toClientRect(i)}),n.fromClientRect(o)):i},defaultHandler:function(t){return t.panelRect}}}),i("c",["g","j","i","k","l","f","m","5"],function(t,n,e,r,i,o,u,c){return function(){var a,l,f=["bold","italic","|","quicklink","h2","h3","blockquote"],s=["quickimage","quicktable"],d=function(t){return t.items().length>0},m=function(e,o){var u=function(n,e){return t.map(e,function(t){return r.create(n,t.id,t.items)})}(e,o).concat([r.create(e,"text",function(t){return c.getToolbarItemsOr(t,"selection_toolbar",f)}(e)),r.create(e,"insert",function(t){return c.getToolbarItemsOr(t,"insert_toolbar",s)}(e)),i.createQuickLinkForm(e,y)]);return n.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:t.grep(u,d),oncancel:function(){e.focus()}})},h=function(t){t&&t.show()},g=function(t,n){t.moveTo(n.x,n.y)},p=function(n,e){e=e?e.substr(0,2):"",t.each({t:"down",b:"up",c:"center"},function(t,r){n.classes.toggle("arrow-"+t,r===e.substr(0,1))}),"cr"===e?(n.classes.toggle("arrow-left",!0),n.classes.toggle("arrow-right",!1)):"cl"===e?(n.classes.toggle("arrow-left",!0),n.classes.toggle("arrow-right",!0)):t.each({l:"left",r:"right"},function(t,r){n.classes.toggle("arrow-"+t,r===e.substr(1,1))})},v=function(t,n){var e=t.items().filter("#"+n);return e.length>0&&(e[0].show(),t.reflow(),!0)},b=function(t,n,r,i){var a,f,s,d;return d=c.getHandlerOr(r,"inline_toolbar_position_handler",u.defaultHandler),a=o.getContentAreaRect(r),f=e.DOM.getRect(t.getEl()),!!(s="insert"===n?u.calcInsert(i,a,f):u.calc(i,a,f))&&(f=s.rect,l=i,g(t,u.userConstrain(d,i,a,f)),p(t,s.position),!0)},y=function(){a&&a.hide()};return{show:function(t,n,e,r){a||((a=m(t,r)).renderTo(document.body).reflow().moveTo(e.x,e.y),t.nodeChanged()),function(t,n,e,r){h(t),t.items().hide(),v(t,n)?!1===b(t,n,e,r)&&y(t):y(t)}(a,n,t,e)},showForm:function(t,n){if(a){if(a.items().hide(),!v(a,n))return void y(a);var r,i,f,s;h(a),a.items().hide(),v(a,n),s=c.getHandlerOr(t,"inline_toolbar_position_handler",u.defaultHandler),r=o.getContentAreaRect(t),i=e.DOM.getRect(a.getEl()),(f=u.calc(l,r,i))&&(i=f.rect,g(a,u.userConstrain(s,l,r,i)),p(a,f.position))}},reposition:function(t,n,e){a&&b(a,n,t,e)},inForm:function(){return a&&a.visible()&&a.items().filter("form:visible").length>0},hide:y,focus:function(){a&&a.find("toolbar:visible").eq(0).each(function(t){t.focus(!0)})},remove:function(){a&&(a.remove(),a=null)}}}}),i("n",["s"],function(t){return{blobToBase64:function(n){return new t(function(t){var e=new FileReader;e.onloadend=function(){t(e.result.split(",")[1])},e.readAsDataURL(n)})}}}),i("o",["s"],function(t){return{pickFile:function(){return new t(function(t){var n;(n=document.createElement("input")).type="file",n.style.position="fixed",n.style.left=0,n.style.top=0,n.style.opacity=.001,document.body.appendChild(n),n.onchange=function(n){t(Array.prototype.slice.call(n.target.files))},n.click(),n.parentNode.removeChild(n)})}}}),i("b",["c","n","o","p"],function(t,n,e,r){return{addToEditor:function(t,i){t.addButton("quicklink",{icon:"link",tooltip:"Insert/Edit link",stateSelector:"a[href]",onclick:function(){i.showForm(t,"quicklink")}}),t.addButton("quickimage",{icon:"image",tooltip:"Insert image",onclick:function(){e.pickFile().then(function(e){var i=e[0];n.blobToBase64(i).then(function(n){r.insertBlob(t,n,i)})})}}),t.addButton("quicktable",{icon:"table",tooltip:"Insert table",onclick:function(){i.hide(),r.insertTable(t,2,2)}}),function(t){for(var n=function(n){return function(){r.formatBlock(t,n)}},e=1;e<6;e++){var i="h"+e;t.addButton(i,{text:i.toUpperCase(),tooltip:"Heading "+e,stateSelector:i,onclick:n(i),onPostRender:function(){this.getEl().firstChild.firstChild.style.fontWeight="bold"}})}}(t)}}}),i("0",["1","2","3","4","5","6","7","8","9","a","b","c"],function(t,n,e,r,i,o,u,c,a,l,f,s){var d=function(t){var n=t.contextToolbars;return r.flatten([n||[],function(t,n,e,r){return{predicate:function(e){return t.dom.is(e,n)},id:e,items:r}}(t,"img","image","alignleft aligncenter alignright")])},m=function(t,n){var e,r,i;return r=function(t){var n=t.selection.getNode();return t.dom.getParents(n)}(t),i=c.fromContextToolbars(n),(e=u.match(t,[o.element(r[0],i),a.textSelection("text"),a.emptyTextBlock(r,"insert"),o.parent(r,i)]))&&e.rect?e:null},h=function(t,n){return function(){t.removed||function(){var e=d(t),r=m(t,e);r?n.show(t,r.id,r.rect,e):n.hide()}()}},g=function(t,n){var r=e.throttle(h(t,n),0),i=e.throttle(function(t,n,e){return function(){t.removed||n.inForm()||e()}}(t,n,h(t,n)),0);t.on("blur hide ObjectResizeStart",n.hide),t.on("click",r),t.on("nodeChange mouseup",i),t.on("ResizeEditor keyup",r),t.on("ResizeWindow",function(t,n){return function(){var e=d(t),r=m(t,e);r&&n.reposition(t,r.id,r.rect)}}(t,n)),t.on("remove",n.remove),t.shortcuts.add("Alt+F10","",n.focus)},p=function(t,n){return l.load(t,function(){g(t,n),function(t,n){t.shortcuts.remove("meta+k"),t.shortcuts.add("meta+k","",function(){var e=d(t),r=r=u.match(t,[a.textSelection("quicklink")]);r&&n.show(t,r.id,r.rect,e)})}(t,n)}),{}};return t.add("inlite",function(t){var n=new s;f.addToEditor(t,n);return{renderUI:function(){return t.inline?p(t,n):function(t){throw new Error(t)}("inlite theme only supports inline mode.")}}}),n.appendTo(window.tinymce?window.tinymce:{}),function(){}}),r("0")()}();