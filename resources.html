<!DOCTYPE html>
<html>

<head>
    
    <script class="singulr-ignore" src="https://rawgit.com/richyliu/singulr/6697a19/singulr-page.min.js"></script>
    
    <title>Resource - Troop 485</title>

</head>

<body>

    <div class="container">

        <div class="row">
            <div class="box col-sm-6" style="padding-bottom: 37px;">
                <hr>
                <h2 class="intro-text text-center"><strong>Uniform</strong> Guide</h2>
                <hr>
                <a onclick="openModal(event, 'img/new-scout_2.pdf')"><img class="img-responsive img-border img-top" src="img/new-scout_1.gif" alt="Uniform Guide" style="margin: auto"></a>
            </div>
            <div class="box col-sm-6">
                <hr>
                <h2 class="intro-text text-center">Resources</h2>
                <hr>
                <ul>
                    <li><a onclick="openModal(event, 'https://docs.google.com/document/d/1IC1fttf7tEZhezKfNKs0ADtHOQjgyBcMSqjQ_75zUKk/mobilebasic')">Council Resource</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/document/d/1dtMPUhKv6eOfKaxk3iMwnRbovgu0yZt6J0mH8wPdBfY/mobilebasic')">Things to Remember</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/presentation/embed?id=15e_mFNG0x4JIhqbCOZ3CDkVm_nrmEnXYE1RFOEQKd-w&start=false&loop=false')">Advancement Presentation (By Calvin Ho)</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/document/d/1ssoNp8eQqNzkeJAefQdLk6aqu5bEMGarUHX9RvpV1BU/mobilebasic')">Resume Template</a></li>
                    <li><a onclick="openModal(event, 'https://troop8.org/sites/troop8.org/files/BSA_Fieldbook.pdf')">BSA Fieldbook (67 MB)</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/presentation/embed?id=1cqU9DQ0c4RXcm0GJ-gJJ8pRP8Ah3WsYApBlaLbrnRhw&start=false&loop=false')">Year End Party Presentation</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/document/d/1a56ZOlhhT1MT7QGXwLSzmsD5l1cahH44O6kUFNTAJ3I/mobilebasic')">Packing List</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/gview?url=http://www.arcconsultinggroup.com/downloads/finance/Patrol%20Leader%20Handbook%2032502.pdf&embedded=true')">Patrol Leader Handbook</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/document/d/16ft2MS85ZYynyJC9lMIo6Kp8yaJQfcGmY62ayj97_uo/mobilebasic')">TLT 2016 - Lecture Notes</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/presentation/embed?id=16vDoqikgorGn4utl1sHBkMhXqbEbvwtGkJ5xMMfbm-o&start=false&loop=false')">2016 Advancement Update</a></li>
                    <li><a onclick="openModal(event, 'https://docs.google.com/viewer?srcid=0Bz_nBTtnwG9-MkVlS19xNGZpR2pQTG1uU1l0cXNoSkVwS1Jz&pid=explorer&efh=false&a=v&chrome=false&embedded=true')">New Scout Requirements 2016 Insert</a></li>
                </ul>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="row">
            <div class="box col-md-12">
                <hr>
                    <h2 class="intro-text text-center">Add <strong>File</strong></h2>
                <hr>
                <form role="form">
                    <div class="form-group">
                        <label for="event-name">Email address:</label>
                        <input type="text" class="form-control" id="event-name">
                    </div>
                    <div class="form-group">
                        <label for="files">File upload (you can select multiple)</label>
                        <input type="file" id="files" name="files[]" multiple class="form-control-file">
                    </div>
                    <button type="submit" class="btn btn-default" id="submit">Submit</button>
                </form>
            </div>
        </div>

    </div>
    <!-- /.container -->
    
    
    <!-- Modal -->
    <div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="myModal" role="dialog" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" class="close" data-dismiss="modal" type="button">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Content Unavaliable</h4>
                </div>
                
                <div class="modal-body">
                    <iframe frameborder="0" height="90%" id="ifr" name="ifr" src="" width="90%">Unfortunately, this content is unavaliable at this time. Please give feedback for this bug, and view the document on your google drive.</iframe>
                </div>
                
                <div class="modal-footer">
                    <a class="btn btn-primary" href="https://google.com" id="mdlk" target="_blank" type="button">Open in new tab</a>
                    <button class="btn btn-primary" onclick="requestFullScreen();">Fullscreen mode</button>
                    <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    
    
    <script>
        
        auth(function() {}, function() {
            sessionStorage.setItem('auth-redirect', 'resources.html');
            Singulr.loadPage('login.html?redirect=resources.html');
        });
        
        
        var storageRef = firebase.storage().ref();
        var ref = firebase.database().ref();
        
        
        document.getElementById('submit').click = function() {
            var files = document.getElementById('files').files;
            var loadedFiles = new Array(files.length);
            var downloadURLs = [];
            
            
            for (var i = 0; i < files.length; i++) {
                uploadFile(files[i], i, function(downloadURL, i) {
                    loadedFiles[i] = true;
                    
                    downloadURLs.push(downloadURL);
                    console.log(downloadURL);
                    
                    for (var j = 0; j < files.length; j++) {
                        if (loadedFiles[j] === undefined) return;
                    }
                    
                    // all files are loaded
                    console.log('all done!');
                    
                    ref.child('resourceUrls').push({
                        event: 'foo',
                        urls: downloadURLs.toString()
                    });
                });
            }
        };
        
        
        function uploadFile(file, i, callback) {
            var uploadTask = storageRef.child('resources/' + file.name).put(file);

            uploadTask.on('state_changed', function() {}, function(error) {
                // Handle unsuccessful uploads
                console.error(error.message);
            }, function() {
                // Handle successful uploads on complete
                callback(uploadTask.snapshot.downloadURL, i);
            });
        }
        
        
        
        
        function openModal(e, url) {
            var title = (e.target.tagName === 'A' ? title = e.target.innerHTML : e.target.attributes.alt.nodeValue);
            
            $('#myModalLabel').html(title);
            $('#ifr').attr('src', url);
            $('#mdlk').attr('href', url);
            $('#myModal').modal('show');
        }
        
        function requestFullScreen() {
            var el = document.getElementById("ifr");
            // Supports most browsers and their versions.
            var requestMethod = el.requestFullScreen || el.webkitRequestFullScreen || el.mozRequestFullScreen || el.msRequestFullScreen;
        
            if (requestMethod) {
                requestMethod.call(el);
            // Older IE.
            } else if (typeof window.ActiveXObject !== "undefined") {
                var wscript = new ActiveXObject("WScript.Shell");
        
                if (wscript !== null) {
                    wscript.SendKeys("{F11}");
                }
            }
        }
    </script>

</body>

</html>
