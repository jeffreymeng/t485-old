<!DOCTYPE html>
<html lang="en">

<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Join Troop 485 in Cupertino to experience an excellent Scouting experience">
    <meta name="author" content="Richard Liu">
    
    <link rel="apple-touch-icon" sizes="144x144" href="favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="favicons/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="favicons/manifest.json">
    <meta name="theme-color" content="#008000">
    
    <title>Log In - Troop 485</title>
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">

    <!-- Bootstrap Core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="css/t485.css" rel="stylesheet">
    
    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">

</head>

<body>

    <a href="index.html"><img src="img/header.gif" id="header" alt="Troop 485" width="990" height="151"></a>

    <!-- Navigation -->
    <nav class="navbar navbar-default">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- navbar-brand is hidden on larger screens, but visible when the menu is collapsed -->
                <a class="navbar-brand" href="index.html">T485</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="calendar.html">Calendar</a>
                    </li>
                    <li>
                        <a href="new-scout.html">New Scout</a>
                    </li>
                    <li>
                        <a href="forum.html">Forum</a>
                    </li>
                    <li>
                        <a href="pictures.html">Pictures</a>
                    </li>
                    <li class="dropdown">
                        <a>FAQ <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="faq.html">FAQ</a></li>
                            <li><a href="merit-badges.html">Merit Badges</a></li>
                            <li><a href="eagle.html">Path to Eagle</a></li>
                            <li><a href="smc.html">SMC &amp; BOR</a></li>
                            <li><a href="plc.html">What is PLC?</a></li>
                            <li><a href="about.html">About</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a>Resources <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="resources.html">Resources</a></li>
                            <li><a href="meeting-minutes.html">Meeting Minutes</a></li>
                            <li><a href="books.html">Books</a></li>
                            <li><a href="troop-jobs.html">Troop Jobs</a></li>
                            <li><a href="ranks.html">Ranks</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a>Directory <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="directory.html">Directory</a></li>
                            <li><a href="contact.html">Enter Contact Information</a></li>
                        </ul>
                    </li>
                    <li>
                    <li><div id="profile"></div></li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
    
    <a href="#" id="toTop"></a>

    <div class="alert alert-info alert-dismissible" role="alert">
        <a class="close" data-dismiss="alert">Ã—</a>
        <span class="glyphicon glyphicon-info-sign"></span>  Click <a href="feedback.html" style="color: darkred;">here</a> to submit feedback to help me improve the website!
    </div>

    <!-- https://accounts.google.com/o/oauth2/auth?response_type=token&scope=profile&redirect_uri=http%3A%2F%2Ft485.org&client_id=484093697294-ptjocjkbkl629v80iuv555e2d04gtq6a.apps.googleusercontent.com -->
    <div class="container">

        <div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center">Log In</h2>
                    <hr>
                </div>
                <div class="col-md-12">
                    <a class="btn btn-social btn-google login" onclick="signIn();">
                        <span class="fa fa-google"></span> Sign in with Google
                    </a>
                    <p class="logged-in" style="display: none;">You have successfully logged in.</p>
                    <button class="btn btn-default logged-in" onclick="window.location.href='logout.html?redir=index.html'">Logout</button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>

    </div>
    <!-- /.container -->

    <footer>
        <div class="container">
            <div class="box">
                <div class="col-lg-12 text-center">
                    <p>Copyright &copy; 2015-2016 Troop 485, Silicon Valley Monterey Bay Council, Boy Scouts of America</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script src="js/t485.js"></script>
    <script src="js/tabletop.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <!-- Firebase -->
    <script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>
    
    <!-- Clicky Web Analytics -->
    <script src="https://static.getclicky.com/js"></script>
    <script>try{clicky.init(100869133)}catch(e){}</script>
    <noscript><img alt="Clicky" src="https://in.getclicky.com/100869133ns.gif"></noscript>

    <script>
        /* global Firebase */
        /* global getVarsFromUrl */
        /* global setAuth */
        /* global auth */
        /* global setCookie */
        /* global getCookie */
        
        
        var redirectUrl = getVarsFromUrl()['redirect'] || 'index.html';
        var ref = new Firebase('https://t485auth.firebaseio.com');
        window.members = [ '12345ryanwang@gmail.com', 'acfkong@yahoo.com', 'albertwang0214@gmail.com', 'alexz12398@gmail.com', 'andrewzheng8@gmail.com',
        'anitaylin@yahoo.com', 'artbowong@gmail.com', 'baronwang1021@gmail.com', 'bowenjiang@gmail.com', 'brandon_z_zhang@yahoo.com',
        'brandonykli@gmail.com', 'bsa485@gmail.com', 'chang_chiwei@yahoo.com', 'chenchen4937@gmail.com', 'chhuangw@msn.com', 'cindycui1239@gmail.com',
        'cindycui4461239@yahoo.com.cn', 'clarawong.ss@gmail.com', 'clpcl88@gmail.com', 'cnlau1235@yahoo.com', 'conan1235@gmail.com', 'cooperred@gmail.com',
        'ct_kao@yahoo.com', 'dalunbao@yahoo.com', 'danielcyao@gmail.com', 'danielningx80@gmail.com', 'danielzlin@yahoo.com', 'daping.zhang@gmail.com',
        'david021301@gmail.com', 'davidccho@gmail.com', 'davidleemail12@gmail.com', 'dday4040@gmail.com', 'djy20w@gmail.com', 'dylantsai1999@yahoo.com',
        'eaglebenjamint@gmail.com', 'edbertjao@gmail.com', 'eric.z.car@gmail.com', 'ethan_lian@tsmc.com', 'ethanlian@gmail.com', 'euray4201@gmail.com',
        'fchen1991@gmail.com', 'feliciaus94306@yahoo.com', 'forestyang80@gmail.com', 'frankyao333@gmail.com', 'fwong94306@gmail.com',
        'garrick.chang@gmail.com', 'gcao_99@yahoo.com', 'glenchen1056@gmail.com', 'gogodandan@gmail.com', 'guan.jonathan1@gmail.com',
        'guandenise@sbcglobal.net', 'guolin.yang@gmail.com', 'guoshu8101@gmail.com', 'hagenzhang2015@gmail.com', 'haimingt@yahoo.com', 'hjacobho@gmail.com',
        'hnie71@gmail.com', 'ho.calvin3@gmail.com', 'hong.chen@gmail.com', 'hongz2002@gmail.com', 'huis.family@gmail.com', 'humbbringer@gmail.com',
        'icestormf1@gmail.com', 'itachijc@yahoo.com', 'jacobnie2008@gmail.com', 'janet_yau@yahoo.com', 'jed.lee9@gmail.com', 'jeddhui@gmail.com',
        'jedlee9@yahoo.com', 'jeffmeng7@gmail.com', 'jeremiahlb7@yahoo.com', 'jerry_zhang@bd.com', 'jianjyao@gmail.com', 'jihengkao@gmail.com',
        'jim_mei@hotmail.com', 'jimball234@gmail.com', 'jingchen72@gmail.com', 'jinyudoudou@hotmail.com', 'jjustinx@gmail.com', 'jlai95014@yahoo.com',
        'jody1020@aol.com', 'joekuo99@gmail.com', 'johnny@chenhome.org', 'johnson_kou@yahoo.com', 'jonathan.ty.lu@gmail.com', 'josh@chenhome.org',
        'joshuazmei31@gmail.com', 'joyjoycelia@gmail.com', 'justin1998@gmail.com', 'jyqiao@gmail.com', 'ks3101@163.com', 'kwei1_08@yahoo.com',
        'kzhang99@gmail.com', 'kzheng888@gmail.com', 'lakeman@gmail.com', 'lancew2012@gmail.com', 'lanshen2008@gmail.com', 'lawawsomeboy@gmail.com',
        'lee.jayson.jayson@gmail.com', 'leonlau313@gmail.com', 'lg9393@gmail.com', 'lihongc@gmail.com', 'lili_yi@yahoo.com', 'lilylau313@gmail.com',
        'linda.c.bao@gmail.com', 'lindacai@yahoo.com', 'liyuchen2000@yahoo.com', 'lo_chien@yahoo.com', 'loveneverfails.kuo@gmail.com', 'lsun2011@gmail.com',
        'lw2354@163.com', 'lw2354@yahoo.com', 'margaret.z.zhao@gmail.com', 'margaret_zhao@hotmail.com', 'matt.tsai.55@gmail.com', 'maxwellkchan@gmail.com',
        'melody@chenhome.org', 'melodyxiong711@gmail.com', 'minmma@gmail.com', 'mtham88@yahoo.com', 'oliversguan@gmail.com', 'ouyang2007@gmail.com',
        'Panlin_us@yahoo.com', 'patricky168@gmail.com', 'peilinjiang2007@gmail.com', 'pow827@gmail.com', 'qiaodavid5@gmail.com', 'qip1801@163.com',
        'qip2636@gmail.com', 'rhsieh2005@yahoo.com', 'richy.liu.2002@gmail.com', 'ruili2000@hotmail.com', 'rzhsieh2013@gmail.com', 'samng_ccf@yahoo.com',
        'samuelting@gmail.com', 'samuelting@yahoo.com', 'samuelwong.lh@gmail.com', 'sc.ivy.hsu@gmail.com', 'scouting@garricka.com',
        'scoutingiscool99@yahoo.com', 'scoutingisfun88@yahoo.com', 'sherry_zhangyu@yahoo.com', 'shujenjao@gmail.com', 'shuqingli2007@gmail.com',
        'sismmk@gmail.com', 'Skyblue1086@gmail.co', 'skyblue1086@gmail.com', 'stardust.us50@gmail.com', 'stevenjiang2004@gmail.com', 'stevenkou@gmail.com',
        'syzcpatax@gmail.com', 't485bsa@yahoo.com', 'tedleeteam@gmail.com', 'tedylee@live.com', 'tehhenyu@gmail.com', 'tehhenyu@hotmail.com',
        'tengo1627@gmail.com', 'teresapan11@gmail.com', 'teresawang168@gmail.com', 'the.casper.wu@gmail.com', 'tianyue.t.yang@gmail.com',
        'timothyl201@gmail.com', 'tjzhoupj@gmail.com', 'tracey.meng@gmail.com', 'twong_@yahoo.com', 'unknownsoul98910@gamil.com', 'unknownsyrum@gmail.com',
        'vanrookjs@gmail.com', 'vivawind@gmail.com', 'vivian_tang@yahoo.com', 'weihongzhang@hotmail.com', 'wen.zhu2006@gmail.com', 'whzhang99@gmail.com',
        'williamjao@yahoo.com', 'winnietu@yahoo.com', 'wmwcomp@hotmail.com', 'xiaochen133@gmail.com', 'xiaotong_he@yahoo.com', 'xichen06@gmail.com',
        'xie_bo@hotmail.com', 'xujian_us@yahoo.com', 'yanfangz@yahoo.com', 'yao.sharon@gmail.com', 'yayperry@gmail.com', 'yijiehuang77@gmail.com',
        'yinghailu@gmail.com', 'yoweiliu@gmail.com', 'yuanwen@gmail.com', 'yuhua_c2000@yahoo.com', 'yunchunli@gmail.com', 'yzxn@ymail.com',
        'zhaomei_zhang@yahoo.com', 'zlpac05@gmail.com', 'zonghuan.wu@gmail.com'];
        
        
        if (auth()) {
            handleLoggedIn(redirectUrl);
        }
        
        
        // console.log('Members: ' + window.members);
            
        
        console.log('1');
        
        
        function onAuthCallback(authData) {
            console.log('authdata: ' + authData);
            
            if (authData !== null) {
                // Login succeeded
                var email = authData.google.email;
                console.log('Email: ' + email);
                
                // Check if email is on approved list
                if (window.members.indexOf(email) > -1) {
                    setAuth();
                    console.log('logged in');
                    handleLoggedIn(redirectUrl);
                } else {
                    alert('Sorry, but you are not authorized to view this page.');
                    window.location.href = 'index.html';
                }
            }
        }
        
        
        ref.onAuth(onAuthCallback);
        
        console.log('2');
        
        /*setTimeout(function() {
            console.log('2');
            ref.onAuth(function(authData) {
                console.log('authdata: ' + authData);
                if (authData !== null) {
                    // Login succeeded
                    var email = authData.google.email;
                    console.log('Email: ' + email);
                    // Check if email is on approved list
                    if (window.members.indexOf(email) > -1) {
                        setAuth();
                        console.log('logged in');
                        handleLoggedIn(redirectUrl);
                    } else {
                        alert('Sorry, but you are not authorized to view this page.');
                        window.location.href = 'index.html';
                    }
                }
            });
        }, 3000);*/
        
        
        function signIn() {
            console.log('3');
            ref.authWithOAuthRedirect('google', function(error) {
               if (error) console.log('Login failed! ' + error);
            }, {
                remember: 'sessionOnly',
                scope: 'email'
            });
        }
        
        
        function handleLoggedIn(url) {
            if (url !== null) {
                console.log(url);
                window.location.href = url;
            } else {
                // Handle login without redirect url
                $('.login').hide();
                $('.logged-in').show();
                
                // Throw errow to end js execution
                throw '';
            }
        }
    </script>
    
</body>

</html>